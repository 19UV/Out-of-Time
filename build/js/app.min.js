var game={data:{score:0},onload:function(){if(!me.video.init(960,640,{wrapper:"screen",scale:"auto",scaleMethod:"flex"}))return void alert("Your browser does not support HTML5 canvas.");me.audio.init("mp3,ogg"),me.loader.preload(game.resources,this.loaded.bind(this))},loaded:function(){me.state.set(me.state.MENU,new game.TitleScreen),me.state.set(me.state.PLAY,new game.PlayScreen),me.pool.register("mainPlayer",game.PlayerEntity),me.state.change(me.state.PLAY)}};game.resources=[{name:"tavern",type:"image",src:"data/img/map/tavern.png"},{name:"tavern_bedroom",type:"tmx",src:"data/map/tavern_bedroom.tmx"},{name:"tavern-bedroom2",type:"tmx",src:"data/map/tavern-bedroom2.tmx"}],game.PlayerEntity=me.Entity.extend({init:function(a,b,c){me.Entity.prototype.init.apply(this,[a,b,c])},update:function(a){return this.body.update(a),me.collision.check(this),me.Entity.prototype.update.apply(this,[a])||0!==this.body.vel.x||0!==this.body.vel.y},onCollision:function(a,b){return!0}}),game.HUD=game.HUD||{},game.HUD.Container=me.Container.extend({init:function(){me.Container.prototype.init.apply(this),this.isPersistent=!0,this.floating=!0,this.name="HUD",this.addChild(new game.HUD.ScoreItem(5,5))}}),game.HUD.ScoreItem=me.Renderable.extend({init:function(a,b){me.Renderable.prototype.init.apply(this,[a,b,10,10]),this.score=-1},update:function(){return this.score!==game.data.score&&(this.score=game.data.score,!0)},draw:function(a){}}),game.PlayScreen=me.Stage.extend({onResetEvent:function(){game.data.score=0,this.HUD=new game.HUD.Container,me.game.world.addChild(this.HUD)},onDestroyEvent:function(){me.game.world.removeChild(this.HUD)}}),game.TitleScreen=me.Stage.extend({onResetEvent:function(){},onDestroyEvent:function(){}});